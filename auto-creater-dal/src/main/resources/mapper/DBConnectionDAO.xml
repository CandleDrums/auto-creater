<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cds.app.creater.dal.dao.DBConnectionDAO">
  <resultMap id="DBConnectionDOResultMap" type="com.cds.app.creater.dal.model.DBConnectionDO">
    <id column="id" property="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
    <result column="passwd" property="passwd" jdbcType="VARCHAR" javaType="java.lang.String" />
    <result column="port" property="port" jdbcType="VARCHAR" javaType="java.lang.String" />
    <result column="user_name" property="userName" jdbcType="VARCHAR" javaType="java.lang.String" />
    <result column="name" property="name" jdbcType="VARCHAR" javaType="java.lang.String" />
    <result column="host" property="host" jdbcType="VARCHAR" javaType="java.lang.String" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" javaType="java.util.Date" />
  </resultMap>
  <sql id="DBConnectionDOColumns">id,passwd,port,user_name,name,host,create_date</sql>
  <insert id="save" keyProperty="id" useGeneratedKeys="true" parameterType="com.cds.app.creater.dal.model.DBConnectionDO">insert into db_connection
 	(passwd,port,user_name,name,host,create_date) 
 	values 
 	 (#{passwd, jdbcType=VARCHAR, javaType=java.lang.String},
	 #{port, jdbcType=VARCHAR, javaType=java.lang.String},
	 #{userName, jdbcType=VARCHAR, javaType=java.lang.String},
	 #{name, jdbcType=VARCHAR, javaType=java.lang.String},
	 #{host, jdbcType=VARCHAR, javaType=java.lang.String},
	 current_timestamp	)</insert>
  <insert id="saveAll" parameterType="java.util.List">
    insert into db_connection
 	(passwd,port,user_name,name,host,create_date) 
 	 values
    <foreach collection="list" item="item" index="index" separator=",">(	 #{item.passwd, jdbcType=VARCHAR, javaType=java.lang.String},
	 #{item.port, jdbcType=VARCHAR, javaType=java.lang.String},
	 #{item.userName, jdbcType=VARCHAR, javaType=java.lang.String},
	 #{item.name, jdbcType=VARCHAR, javaType=java.lang.String},
	 #{item.host, jdbcType=VARCHAR, javaType=java.lang.String},
	 current_timestamp,
	)</foreach>
  </insert>
  <delete id="delete" parameterType="java.lang.Integer">delete from db_connection 
 	 where 
 	 id=#{id, jdbcType=INTEGER,javaType=java.lang.Integer}</delete>
  <select id="detail" parameterType="java.lang.Integer" resultMap="DBConnectionDOResultMap">
    select
    <include refid="DBConnectionDOColumns" />
    from db_connection 
 	 where id=#{id, jdbcType=INTEGER,javaType=java.lang.Integer} limit 1
  </select>
  <select id="detailList" parameterType="java.util.List" resultMap="DBConnectionDOResultMap">
    select
    <include refid="DBConnectionDOColumns" />
    from db_connection 
 	 where id in
    <foreach collection="list" item="item" index="index" separator="," open="(" close=")">#{item}</foreach>
  </select>
  <select id="contains" parameterType="hashMap" resultType="boolean">
    select 
	 count(*)
	 from db_connection
    <trim prefix="where" prefixOverrides="and|or">
      <if test="passwd != null and passwd !=''">and passwd = #{passwd, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="port != null and port !=''">and port = #{port, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="userName != null and userName !=''">and user_name = #{userName, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="name != null and name !=''">and name = #{name, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="host != null and host !=''">and host = #{host, jdbcType=VARCHAR, javaType=java.lang.String}</if>
    </trim>
    limit 2
  </select>
  <select id="queryPagingList" parameterType="com.cds.app.creater.dal.model.DBConnectionDO" resultMap="DBConnectionDOResultMap">
    select
    <include refid="DBConnectionDOColumns" />
    from db_connection
    <trim prefix="where" prefixOverrides="and|or">
      <if test="passwd != null and passwd !=''">and passwd = #{passwd, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="port != null and port !=''">and port = #{port, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="userName != null and userName !=''">and user_name = #{userName, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="name != null and name !=''">and name = #{name, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="host != null and host !=''">and host = #{host, jdbcType=VARCHAR, javaType=java.lang.String}</if>
    </trim>
  </select>
  <select id="queryPagingCount" parameterType="com.cds.app.creater.dal.model.DBConnectionDO" resultType="int">
    select 
	 count(*)
	 from db_connection
    <trim prefix="where" prefixOverrides="and|or">
      <if test="passwd != null and passwd !=''">and passwd = #{passwd, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="port != null and port !=''">and port = #{port, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="userName != null and userName !=''">and user_name = #{userName, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="name != null and name !=''">and name = #{name, jdbcType=VARCHAR, javaType=java.lang.String}</if>
      <if test="host != null and host !=''">and host = #{host, jdbcType=VARCHAR, javaType=java.lang.String}</if>
    </trim>
  </select>
</mapper>
